CFLAGS = @CFLAGS@ -I./AppliLib/include -I./ParseLib/include -I./CommonLib/include

LDFLAGS = @LDFLAGS@

.c.o:
	@CC@ $CFLAGS $< -o $@

EXE = sparse

SOURCES = ./main.c

OBJECTS = $(SOURCES:.c=.o)

LIBRARIES = ./CommonLib/libCommon.a \
	    ./AppliLib/libAppli.a \
	    ./ParseLib/libParse.a

all: $(EXE)

$(EXE): $(LIBRARIES) $(OBJECTS)
	@CC@ $(OBJECTS) $(LIBRARIES) -o $(EXE)

$(LIBRARIES):
	echo "Building " $@
        cd $(@D) && make && cd ..;
clean:
	@CLEAN@ $(LIBRARIES)
	@CLEAN@ ./*/*/*.o
	@CLEAN@ -rf $(OBJECT) $(EXE)

distclean:
